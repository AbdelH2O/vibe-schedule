# Implementation Plan: Polish & Indicators

**Branch**: `006-polish-indicators` | **Date**: 2026-01-18 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/006-polish-indicators/spec.md`

## Summary

Phase 6 adds visual polish and production-readiness features to the vibe-schedule MVP: deadline countdown indicators with urgency styling, time remaining visualizations with progress bars and threshold-based color changes, mode transition feedback with animations and accessibility announcements, contextual empty states with actionable guidance, responsive design for mobile/tablet/desktop, comprehensive keyboard navigation and screen reader support, and graceful error handling with recovery options.

## Technical Context

**Language/Version**: TypeScript 5 (strict mode)
**Primary Dependencies**: Next.js 16.1.3, React 19.2.3, shadcn/ui, Tailwind CSS 4, Lucide React, Radix UI primitives
**Storage**: Browser localStorage (single-device, offline-capable)
**Testing**: Manual testing via `pnpm dev`, lint via `pnpm lint`, build via `pnpm build`
**Target Platform**: Modern web browsers (Chrome, Firefox, Safari, Edge from 2020+)
**Project Type**: Web application (Next.js App Router)
**Performance Goals**: Mode transitions complete within 300ms, smooth 60fps animations, instant visual feedback
**Constraints**: Offline-capable, <5MB localStorage usage, accessible (WCAG 2.1 AA), responsive (320px-2560px)
**Scale/Scope**: Single-user productivity app, ~15 components to enhance

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| **I. Flow Over Rigidity** | ✅ PASS | Deadline indicators inform without interrupting; no modal dialogs for routine actions |
| **II. Context-First Architecture** | ✅ PASS | Enhancements maintain context as primary unit; indicators attach to contexts/tasks |
| **III. Flexible Constraints** | ✅ PASS | Time visualizations show progress without forcing strict schedules; deadlines are indicators only |
| **IV. Simplicity First** | ✅ PASS | Polish builds on existing components; no new abstractions or patterns required |
| **V. Dual-Mode Clarity** | ✅ PASS | Mode transitions receive explicit visual feedback; actions remain mode-appropriate |

**Technical Standards Compliance**:
- ✅ Next.js 16 App Router with `app/` structure
- ✅ React 19 with explicit `'use client'` directives where needed
- ✅ shadcn/ui for accessible components
- ✅ TypeScript strict mode (no `any` types)
- ✅ Tailwind CSS 4 for styling
- ✅ pnpm as package manager

**Quality Gates**:
- ✅ All components will have explicit prop interfaces
- ✅ Accessibility: keyboard navigation and screen reader support explicitly required (FR-017 to FR-020)
- ✅ No new data models or API routes required

## Project Structure

### Documentation (this feature)

```text
specs/006-polish-indicators/
├── plan.md              # This file
├── research.md          # Phase 0 output
├── data-model.md        # Phase 1 output (minimal - no new entities)
├── quickstart.md        # Phase 1 output
└── tasks.md             # Phase 2 output (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
app/
├── components/
│   ├── contexts/           # Context display components (enhance for indicators)
│   │   ├── ContextDetail.tsx
│   │   ├── ContextListItem.tsx
│   │   └── ...
│   ├── tasks/              # Task display components (enhance for deadline styling)
│   │   ├── TaskListItem.tsx
│   │   └── ...
│   ├── working/            # Working mode components (enhance timers, progress)
│   │   ├── ContextTimer.tsx
│   │   ├── SessionTimer.tsx
│   │   ├── ContextSwitcher.tsx
│   │   └── ...
│   ├── session/            # Session setup components
│   │   └── AllocationPreview.tsx
│   ├── shared/             # Reusable components (add new polish utilities)
│   │   └── EmptyState.tsx
│   ├── AppShell.tsx        # Layout shell (responsive enhancements)
│   ├── Sidebar.tsx         # Navigation (mobile collapse)
│   ├── Header.tsx          # Header (responsive)
│   └── ModeIndicator.tsx   # Mode badge (transition animation)
├── globals.css             # Global styles (animation keyframes)
├── layout.tsx              # Root layout
└── page.tsx                # Main page (error boundary wrapper)

lib/
├── dates.ts                # Date utilities (enhance for countdown formatting)
├── store.tsx               # Zustand store (no changes needed)
├── types.ts                # TypeScript types (no changes needed)
└── utils.ts                # Utilities (add accessibility helpers if needed)

components/
└── ui/                     # shadcn/ui components (may add toast for errors)
```

**Structure Decision**: Next.js App Router structure. All enhancements target existing components in `app/components/`. No new directories or architectural changes required.

## Complexity Tracking

> No constitution violations detected. All enhancements follow existing patterns.

## Post-Design Constitution Re-Check

*Re-evaluated after Phase 1 design artifacts completed.*

| Principle | Status | Design Verification |
|-----------|--------|---------------------|
| **I. Flow Over Rigidity** | ✅ PASS | Progress bars and countdowns inform without modal interruptions; toasts are non-blocking |
| **II. Context-First Architecture** | ✅ PASS | All indicators attach to existing Context/Task entities; no new entity types |
| **III. Flexible Constraints** | ✅ PASS | Time thresholds (25%/10%) are visual cues only, not enforcement mechanisms |
| **IV. Simplicity First** | ✅ PASS | No new abstractions; extends existing EmptyState, dates.ts, and component patterns |
| **V. Dual-Mode Clarity** | ✅ PASS | Mode transitions have explicit 300ms animations and aria-live announcements |

**Technical Standards Post-Check**:
- ✅ No new `any` types introduced
- ✅ All new computed values use explicit TypeScript interfaces (DeadlineUrgency, TimeProgress)
- ✅ Accessibility explicitly addressed with aria-live regions and focus management
- ✅ Using shadcn/ui Progress and Toast components (no custom implementations)

**Quality Gates**:
- ✅ All design artifacts complete: research.md, data-model.md, quickstart.md
- ✅ No NEEDS CLARIFICATION items remain
- ✅ Ready for task generation

## Generated Artifacts

| Artifact | Path | Status |
|----------|------|--------|
| Implementation Plan | `specs/006-polish-indicators/plan.md` | ✅ Complete |
| Research | `specs/006-polish-indicators/research.md` | ✅ Complete |
| Data Model | `specs/006-polish-indicators/data-model.md` | ✅ Complete |
| Quickstart Guide | `specs/006-polish-indicators/quickstart.md` | ✅ Complete |
| Tasks | `specs/006-polish-indicators/tasks.md` | ⏳ Pending `/speckit.tasks` |
